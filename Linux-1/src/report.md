# Решение задания

1. [Установка ОС](#part-1-установка-ос)  
2. [Создание пользователя](#part-2-создание-пользователя)  
3. [Настройка сети ОС](#part-3-настройка-сети-ос)   
4. [Обновление ОС](#part-4-обновление-ос)  
5. [Использование команды  sudo](#part-5-использование-команды-sudo)  
6. [Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)  
7. [Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)  
8. [Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd)   
9. [Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)   
10. [Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)   
11. [Использование утилиты df](#part-11-использование-утилиты-df)    
12. [Использование утилиты du](#part-12-использование-утилиты-du)    
13. [Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)    
14. [Работа с системными журналами](#part-14-работа-с-системными-журналами)     
15. [Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)    

## Part 1. Установка ОС

**== Задание ==**

##### Установить **Ubuntu 20.04 Server LTS** без графического интерфейса. (Используем программу для виртуализации - VirtualBox)

- Графический интерфейс должен отсутствовать.

- Узнайте версию Ubuntu, выполнив команду \
`cat /etc/issue.`
- Вставьте скриншот с выводом команды.

**== Решение ==**

- Была установленна программа VirtualBox

- С [официального сайта](http://releases.ubuntu.com/20.04/) был скачан образ для дальнейшей установки


- Результат выполнения команды `cat /etc/issue`:

    ![](screens/123131313133.png)

## Part 2. Создание пользователя

**== Задание ==**

##### Создать пользователя, отличного от пользователя, который создавался при установке. Пользователь должен быть добавлен в группу `adm`.

- Вставьте скриншот вызова команды для создания пользователя.
- Новый пользователь должен быть в выводе команды \
`cat /etc/passwd`
- Вставьте скриншот с выводом команды.

**== Решение ==**

- Создадим нового пользователя sherrylv` с помощью команды:
    ```
    sudo adduser sherrylv
    ```

    ![](screens/adduser.png)

- Добавим нового пользователя `sherrylv` в группу `adm` с помощью команды:
    ```
    sudo usermod -a -G adm sherrylv
    ```

    ![](screens/subo_usermod.png)

- Новый пользователь присутствует в выводе команды
`cat /etc/passwd`

    ![](screens/cat%20sherrylv.png)



## Part 3. Настройка сети ОС

**== Задание ==**

##### Задать название машины вида user-1  
##### Установить временную зону, соответствующую вашему текущему местоположению.  
##### Вывести названия сетевых интерфейсов с помощью консольной команды.
- В отчёте дать объяснение наличию интерфейса lo.  
##### Используя консольную команду получить ip адрес устройства, на котором вы работаете, от DHCP сервера. 
- В отчёте дать расшифровку DHCP.  
##### Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw). 
##### Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).  
##### Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.  

- В отчёте опишите, что сделали для выполнения всех семи пунктов (можно как текстом, так и скриншотами).
- Успешно пропинговать удаленные хосты 1.1.1.1 и ya.ru и вставить в отчёт скрин с выводом команды. В выводе команды должна быть фраза "0% packet loss".

**== Решение ==**

- С помощью команды `hostname` выясним, что при установке ОС машине было задано задано название `vm1`. 


- Зададим новое название машины: `user-1`; с помощью команды:
    ```
    sudo hostname user-1
    ```
- После выполнения этой команды проверим текущее название командой `hostname`

    ![](screens/hostname.png)


---

- Чтобы узнать какая временная зона установлена на данный момент можно воспользоваться командой `date`:

    ![](screens/date.png)

- Для изменения часового пояса на требуемый Asia/Novosibirsk, используем команду:
    ```
    sudo timedatectl set-timezone Asia/Novosibirsk
    ```

    ![](screens/время.png)

- Вывести названия сетевых интерфейсов с помощью консольных команд:
    ```
    ip l
    ```
    ```
    ip address
    ```
    ```
    ls /sys/class/net
    ```

    ![](screens/ip.png)

- >lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost. Интерфейс lo является локальной петлёй. Она предназначена для обеспечения сетевого доступа к компьютеру.

---

- Чтобы узнать ip адрес машины, выданный ей DHCP сервером воспользуемся командой:
    ```
    cat /var/log/syslog | grep -i dhcp
    ```

    ![](screens/dhtp.png)
    
- На скриншоте видно, что DHCP выдал компьютеру ip адрес: 10.0.2.15/24

- >DHCP (Dynamic Host Configuration Protocol) - протокол динамической конфигурации хоста. Сетевой протокол, позволяющий устройствам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP. Данный протокол работает по модели «клиент-сервер». Для автоматической конфигурации компьютер-клиент на этапе конфигурации сетевого устройства обращается к так называемому серверу DHCP и получает от него нужные параметры. IP-адрес (Internet Protocol) - способ адресации устройств по сети.

---
- Чтобы определить и вывести на экран внешний ip-адрес шлюза (ip) воспользуемся командой:
    ```
    curl ifconfig.co
    ```
    ![](screens/Снимок%20экрана%202024-07-17%20150611.png)


- Чтобы определить и вывести на экран внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw), можно воспользоваться командами:
    ```
    ip route
    ```
    ```
    route -n
    ```
    ![](screens/Снимок%20экрана%202024-07-17%20150745.png)
    
- Как видно из скриншотов, внешний IP-адрес шлюза: 37.194.111.32; а внутренний: 10.0.2.2.

---

- Зададим статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (используя публичные DNS серверы, например 1.1.1.1 или 8.8.8.8). DHCP автоматически присваивает устройству IP:

- Откроем файл конфигурации `netplan` в текстовом редакторе `vim` с помощью команды:
    ```
    sudo vim /etc/netplan/00-installer-config.yaml
    ```

- Зададим статические настройки: изменим параметр dhcp4 на значение `false`, в `addresses` укажем статический IP-адрес: `10.0.2.5/24`, и в `gateway4` зададим внутренний IP-адрес `10.0.2.2`. В параметре `addresses` раздела `nameservers` укажем публичные серверы.

    ![](screens/изменение%20адреса%20.png)

- Для применения изменений используем команду:
    ```
    sudo netplan apply
    ```

- Далее перезагрузим виртуальную машину командой `reboot` и проверяем сохранились ли выставленные вручную настройки (проверяем сохранились ли изменения в файле конфигурации). Для этого воспользуемся командой:
    ```
    ip route show
    ```
    ```
    ifconfig
    ```

    ![](screens/route.png)

- На скриншотах видно, что выставленный вручную статический IP-адрес `10.0.2.2` после перезагрузки остался неизменным.

---

- Пропингуем удаленные хосты 1.1.1.1 и ya.ru с помощью команд:
    ```
    ping 1.1.1.1 -c 3
    ```
    ![](screens/nano%20гавно.png)
    ```
    ping ya.ru -c 3
    ```
    ![](screens/пинг2.png)

- На скриншоте видно, что выводе команды присутвствует фраза `0% packet loss`, это свидетельствует о том, что компьютер получил ответ от всех отправленных на указанные сервера пакетов данных.

- >Ping — утилита для проверки целостности и качества соединений в сетях. Утилита отправляет запросы указанному узлу сети и фиксирует поступающие ответы. Время между отправкой запроса и получением ответа позволяет определять двусторонние задержки по маршруту и частоту потери пакетов, то есть косвенно определять загруженность на каналах передачи данных и промежуточных устройствах.

## Part 4. Обновление ОС

**== Задание ==**

##### Обновить системные пакеты до последней на момент выполнения задания версии.  

- После обновления системных пакетов, если ввести команду обновления повторно, должно появится сообщение, что обновления отсутствуют.
- Вставить скриншот с этим сообщением в отчёт.

**== Решение ==**

- Для обновления индекса пакетов или списка пакетов, воспользуемся командой:
    ```
    sudo apt update
    ```
- Обновим системные пакеты до последней, на момент выполнения задания, версии, используя команду:
    ```
    sudo apt full-upgrade
    ```
    ![](screens/апдейт.png)


## Part 5. Использование команды **sudo**

**== Задание ==**

##### Разрешить пользователю, созданному в [Part 2](#part-2-создание-пользователя), выполнять команду sudo.

- В отчёте объяснить *истинное* назначение команды sudo (про то, что это слово - "волшебное", писать не стоит).  
- Поменять hostname ОС от имени пользователя, созданного в пункте [Part 2](#part-2-создание-пользователя) (используя sudo).
- Вставить скрин с изменённым hostname в отчёт.

**== Решение ==**

- Разрешим пользователю, созданному в [Part 2](#part-2-создание-пользователя), выполнять команду sudo. Для этого необходимо добавить пользователя `sherrylv` в группу `sudo`. Воспользуемся командой:
    ```
    sudo usermod -a -G sudo sherrylv
    ```
- Проверим к каким группам принадлежит пользователь `sherrylv` с помощью команды:
    ```
    groups sherrylv
    ```
- На скриншоте видно, что пользователь был добавлен в группу `sudo`. Это дает ему возможность выполнять команду `sudo`.

- >Sudo (Substitute user and do - подменить пользователя и выполнить) – это утилита для операционных систем семейства Linux, позволяющая пользователю запускать программы с привилегиями другой учётной записи, как правило, суперпользователя.

- Поменяем hostname ОС от имени пользователя, созданного в пункте [Part 2](#part-2-создание-пользователя) (используя sudo). Для этого необходимо сменить текущего пользователя `vm1` на ранее созданного `sherrylv` с помощью команды:
    ```
    su sherrylv
    ```

    ![](screens/В%20отчёте%20объясни%20истинное%20назначение%20команды%20sudo%20.png)

- Чтобы узнать текущее имя хоста воспользуемся командой:
    ```
    hostnamectl
    ```
- Изменим имя хоста с `user-1` на `user-2` с помощью команды:
    ```
    sudo hostnamectl set-hostname user-2
    ```
- Проверим изменения командой:
    ```
    hostname
    ```

    ![](screens/hostname2.png)



## Part 6. Установка и настройка службы времени

**== Задание ==**

##### Настроить службу автоматической синхронизации времени.  

- Вывести время, часового пояса, в котором вы сейчас находитесь.
- Вывод следующей команды должен содержать `NTPSynchronized=yes`: \
  `timedatectl show`
- Вставить скрины с корректным временем и выводом команды в отчёт.

**== Решение ==**

- С помощью команды `date` выведем текущее время часового пояса, в котором мы находимся.

- Для вывода настроек часового пояса, используем команду:
    ```
    timedatectl show
    ```

    ![](screens/time2.png)

- >На скриншоте видно, что вывод команды `timedatectl show` содержит `NTPSynchronized=yes`, это соответствует требованию задания. Данная запись свидетельствует о том, что протокол NTP (сетевой протокол времени) активен. NTP - это протокол, отвечающий за синхронизацию времени компьютера со стандартными эталонными часами через интернет с помощью иерархии серверов NTP.

## Part 7. Установка и использование текстовых редакторов 

**== Задание ==**

##### Установить текстовые редакторы **VIM** (+ любые два по желанию **NANO**, **MCEDIT**, **JOE** и т.д.)  
##### Используя каждый из трех выбранных редакторов, создайте файл *test_X.txt*, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений.  
- В отчёт вставьте скриншоты:
  - Из каждого редактора с содержимым файла перед закрытием.
- В отчёте укажите, что сделали для выхода с сохранением изменений.
##### Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.
- В отчёт вставьте скриншоты:
    - Из каждого редактора с содержимым файла после редактирования.
- В отчёте укажите, что сделали для выхода без сохранения изменений.
##### Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.
- В отчёт вставьте скриншоты:
    - Из каждого редактора с результатами поиска слова.
    - Из каждого редактора с командами, введёнными для замены слова на другое.

**== Решение ==**

- Выполним установку текстовых редакторов командами:
    ```
    sudo apt install vim
    ```
    ```
    sudo apt install nano
    ```
    ```
    sudo apt install mcedit
    ```
---
### Запись никнейма в файлы и закрытие с сохранением

- VIM. Запишем никнейм `sherrylv` , перейдя в режим редактирования нажатием клавиши `i`:


    - Для выхода с сохранением изменений нужно нажать `ESC`, затем написать `:wq`, что означает write and quit.

- NANO. Запишем никнейм `sherrylv`:

    - Для выхода с сохранением изменений нужно нажать `Ctrl+S` и затем `Ctrl+X`.

- MCEDIT. Запишем никнейм `sherrylv`:

    - Для выхода с сохранением изменений нужно нажать `F10` и выбрать `Yes`

    ![](screens/ник%20в%20редакторах.png)

---
### Запись "21 School 21" в файлы с выходом без сохранения

- VIM. Запишем "21 School 21":

    ![](screens/отмена%20вим.png)

    - Для выхода без сохранения нужно нажать `ESC`, затем написать `:q!`.

- NANO. Запишем "21 School 21":

    ![](screens/отмена%20нано.png)

    - Для выхода без сохранения изменений нужно нажать `Ctrl+X` и подтвердить нажатием на `N`.

- MCEDIT. Запишем "21 School 21":

    ![](screens/отмена%20сикейт.png)

    - Для выхода без сохранения изменений нужно нажать `F10` и выбрать `No`

---


### Поиск по слову в файлах
- Внесем изменения с предыдущего пункта (запишем в файлы "21 School 21") и сохраним их.

- **VIM**

    - Поиск:
    `ESC + /<слово_для_поиска>`

    - Замена:
    `:s/<заменяемое>/<заменитель>`

    ![](screens/поиск%20vim.png)

- **NANO**

    - Поиск:
    `Ctrl + W`

    - Замена:
    `Ctrl + \`

    ![](screens/nano%20rfkbbot.png)

    - Применяем замену:

    ![](screens/replace.png)

- **MCEDIT**

    - Поиск:
    `F7`
    
    ![](screens/поиск%20десейт.png)


    - Замена:
    `F4`

    ![](screens/замена%20мсегит.png)

    - Вводим и подтверждаем слово для замены:


## Part 8. Установка и базовая настройка сервиса **SSHD**

**== Задание ==**

##### Установить службу SSHd.  
##### Добавить автостарт службы при загрузке системы.  
##### Перенастроить службу SSHd на порт 2022.  
##### Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.
- В отчёте объяснить значение команды и каждого ключа в ней.
##### Перезагрузить систему.
- В отчёте опишите, что сделали для выполнения всех пяти пунктов (можно как текстом, так и скриншотами).
- Вывод команды netstat -tan должен содержать  \
`tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN`  \
(если команды netstat нет, то ее нужно установить)
- Скрин с выводом команды вставить в отчёт.
- В отчёте объяснить значение ключей -tan, значение каждого столбца вывода, значение 0.0.0.0.

**== Решение ==**

- Установим службу SSHd с помощью команды:
    ```
    sudo apt install openssh-server
    ```

- Узнаем состояние SSHd службы, воспользовавшись командой:
    ```
    sudo systemctl status ssh
    ```

    ![](screens/ыыр.png)

- Как видно на скриншоте, автостарт SSHd службы добавлен автоматически при загрузке. Чтобы включить автостарт можно воспользоваться командой `sudo systemctl enable ssh`, для выключения автостарта команда `sudo systemctl disable ssh`.

- Для перенастройки службы SSHd на порт 2022 откроем файл `sshd_config` с помощью команды:
    ```
    sudo nano /etc/ssh/sshd_config
    ```
- Изменим значение параметра `Port` с 22 на 2022

    ![](screens/ssh%202022.png)

- Чтобы изменения в конфигурации сохранились, перезапустим сервер OpenSSH, используя следующую команду:
    ```
    sudo systemctl restart ssh 
    ```

- Проверим состояние SSHd службы после изменения порта командой `sudo systemctl status ssh`

    ![](screens/2022%20порт%20после%20.png)

    - На скриншоте видно, что порт изменен.

- Настроим брандмауэр, так как мы изменили SSH-порт по умолчанию на 2022. 
    - Заменим “ssh” новым номером порта: 
    `sudo ufw allow 2022/tcp`

- Покажем наличие процесса sshd, используя команду:
    ```
    ps aux | grep -i ssh
    ```

    ![](screens/все.png)

    - > **ps** - утилита для просмотра списка процессов в Linux. <br> Параметр `-a` - выбрать все процессы всех пользователей, кроме фоновых. 
    <br> Параметр `-u` обозначает ориентированный на пользователя формат, который предоставляет подробную информацию о процессах. 
    <br> Параметр `-x` указывает `ps` перечислить процессы без управляющего терминала.
    <br> В основном это процессы, которые запускаются во время загрузки и работают в фоновом режиме.
    <br> `grep -i ssh` - выводит только те строчки, где есть ssh с игнорированием регистра за счет `-i`.
    <br> Символ `|` перенаправляет вывод команды `ps aux` на ввод `grep -i ssh`.

- Выполним перезагрузку машины командой `reboot` и выполним команду:
    ```
    netstat -tan
    ```

    ![](screens/nenstat.png)

    - Как видно на скриншоте, вывод команды содержит `tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN`, что соответствует требованию задания.

    - >`netstat -tan`\
    \
    Команда `netstat` показывает статистику приема и отправки пакетов, а также информацию об ошибках приема и отправки.\
    \
    `-a` - Вывод всех активных подключений TCP и прослушиваемых компьютером портов TCP и UDP.\
    `-n` - Вывод активных подключений TCP с отображением адресов и номеров портов в числовом формате без попыток определения имен.\
    Тогда, если `netstat -na` - просмотр всех открытых протоколов, то `netstat -tan` - просмотр всех открытых ТСР-протоколов.\
    \
    При вызове команды в терминал выводится таблица, столбцы которой имеют следующие значения:\
    а) `Proto` - сетевой протокол (tcp, udp);\
    б) `Recv-Q` - количество байтов, помещённых в буфер приёма TCP/IP, но не переданных приложению. Если это число высокое, то нужно проверить работоспособность приложения, которое работает с данным портом.\
    в) `Send-Q` — количество байтов, помещённых в буфер отправки TCP/IP, но не отправленных, или отправленных, но не подтверждённых. Высокое значение может быть связано с перегрузкой сети сервера.\
    г) `Local Address` — локальный адрес сервера. В обычных соединениях, это адрес сервера на который пришло соединение. В прослушиваемых портах (LISTEN) — это диапазон адресов. Так 0.0.0.0:port — значит подключаться можно ко всем адресам сервера, а 192.168.0.35:port — значит подключаться можно только к этому адресу сервера.\
    д) `Foreign Address` — адрес второй стороны. В обычных соединениях, это адрес с которого пришло соединение. В прослушиваемых портах (LISTEN) — это диапазон адресов. Так 0.0.0.0:* — значит подключаться можно с любых адресов и с любых портов, а например 192.168.0.50:* — значит подключаться можно только с этого адреса и с любых портов.\
    е) `State` — состояние подключения, или прослушивания.


## Part 9. Установка и использование утилит **top**, **htop**

**== Задание ==**

##### Установить и запустить утилиты top и htop.  

- По выводу команды top определить и написать в отчёте:
  - uptime
  - количество авторизованных пользователей
  - общую загрузку системы
  - общее количество процессов
  - загрузку cpu
  - загрузку памяти
  - pid процесса занимающего больше всего памяти
  - pid процесса, занимающего больше всего процессорного времени

- В отчёт вставить скрин с выводом команды htop:
  - отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME
  - отфильтрованному для процесса sshd
  - с процессом syslog, найденным, используя поиск 
  - с добавленным выводом hostname, clock и uptime  

**== Решение ==**

- Команда `top` выводит на экран:

    ![](screens/top.png)

  - uptime - 14 минуты;
  - количество авторизованных пользователей - 1;
  - общую загрузку системы - 0.06;
  - общее количество процессов - 106;
  - загрузка cpu - 0.0 %;
  - загрузка памяти - 154.1 из 4136.0;
  - pid процесса занимающего больше всего памяти - 1;
  - pid процесса, занимающего больше всего процессорного времени - 1753. <br>

- **htop** :
    - Вывод команды без сортировки

    ![](screens/htop.png)

    - Для сортировки в `htop` нужно нажать `F6` и выбрать параметр сортировки.
    - `htop` отсортированный по `PID`

    ![](screens/pid.png)

    - `htop` отсортированный по `PERCENT_CPU`

    ![](screens/cpu.png)

    - `htop` отсортированный по `PERCENT_MEM`

    ![](screens/mem.png)

    - `htop` отсортированный по `TIME`

    ![](screens/time.png)

    - Для использования фильтров в `htop` нужно нажать `F4` и выбрать параметр фильтрации.
    - htop, отфильтрованный для процесса SSHd

    ![](screens/sshd.png)

    - Для использования поиска в `htop` нужно нажать `F3` и ввести объект поиска. <br>
    `htop` с процессом `syslog`, найденным, используя поиск:

    ![](screens/syslog.png)

    - Для добавления отображения дополнительных параметров в `htop`, необходимо нажать `F2` и добавить требуемые параметры. `htop` с добавленным выводом hostname, clock и uptime

    ![](screens/hostname%20time.png)


## Part 10. Использование утилиты **fdisk**

**== Задание ==**

##### Запустить команду fdisk -l.

- В отчёте написать название жесткого диска, его размер и количество секторов, а также размер swap.

**== Решение ==**

##### Запустить команду fdisk -l.

- Выполним команду:
    ```
    fdisk -l
    ```
    ![](screens/disk.png)

    - Название жесткого диска: VBOX HARDDISK (/dev/sda);
    - Размер диска: 25 Гигабайт;
    - Количество секторов: 52428800;

- Чтобы узнать размер `swap` выполним команду:
    ```
    free -h
    ```
    ![](screens/swap.png)

- Выяснилось, что:
    - Размер swap: (= 2.2 Гб);

## Part 11. Использование утилиты **df** 

**== Задание ==**

##### Запустить команду df.  
- В отчёте написать для корневого раздела (/):
  - размер раздела
  - размер занятого пространства
  - размер свободного пространства
  - процент использования
- Определить и написать в отчёт единицу измерения в выводе.  

##### Запустить команду df -Th.
- В отчёте написать для корневого раздела (/):
    - размер раздела
    - размер занятого пространства
    - размер свободного пространства
    - процент использования
- Определить и написать в отчёт тип файловой системы для раздела.

**== Решение ==**
- Выполним команду:
    ```
    df /
    ```

    ![](screens/df.png)

    >Для корневого раздела (/):\
        - Размер раздела: 11758760;\
        - Размер занятого пространства: 5012348;\
        - Размер свободного пространства: 6127304;\
        - Процент использования: 45 %;\
        Единицы измерения при выводе: Килобайты.

- Выполним команду:
    ```
    df -Th
    ```

    ![](screens/th.png)

    >Для корневого раздела (/):\
        - Размер раздела: 12;\
        - Размер занятого пространства: 4.9;\
        - Размер свободного пространства: 5.9;\
        - Процент использования: 46 %;\
        Единицы измерения при выводе: Гигабайты.

    Тип файловой системы: `Ext4` - журналируемая файловая система, используемая в ОС на ядре Linux. Основана на файловой системе Ext3, но отличается тем, что в ней представлен механизм записи файлов в непрерывные участки блоков (екстенты), уменьшающий фрагментацию и повышающий производительность. В ней есть журналирование, то есть в ней предусмотрена запись некоторых данных, позволяющих восстановить файловую систему при сбоях в работе компьютера.


## Part 12. Использование утилиты **du**

**== Задание ==**

##### Запустить команду du.
##### Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)
##### Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)

- В отчёт вставить скрины с выводом всех использованных команд.

**== Решение ==**
- Выполним команду:
    ```
    du
    ```

    ![](screens/du.png)

- Вывод размера папки /home в байтах и в человекочитаемом виде командами:
    ```
    sudo du -s /home/
    ```
    ```
    sudo du -sh /home/
    ```

    ![](screens/du%20-sh.png)

- Вывод размера папки /var в байтах и в человекочитаемом виде командами:
    ```
    sudo du -s /var/
    ```
    ```
    sudo du -sh /var/
    ```

    ![](screens/du%20var%20log.png)

- Вывод размера папки /var/log в байтах и в человекочитаемом виде командами:
    ```
    sudo du -s /var/log/
    ```
    ```
    sudo du -sh /var/log/
    ```

    ![](screens/var%20log.png)

- Вывод размера всего содержимого папки /var/log в байтах и в человекочитаемом виде командами:
    ```
    sudo du /var/log/
    ```
    ```
    sudo du -h /var/log/
    ```

    ![](screens/du%20var%20log.png)

- Вывод размера всего содержимого папки (каждого вложенного элемента) /var/log с использованием `*` командой:
    ```
    sudo du /var/log/* | less
    ```

    ![](screens/star.png)


## Part 13. Установка и использование утилиты **ncdu**

**== Задание ==**

##### Установить утилиту ncdu.
##### Вывести размер папок /home, /var, /var/log.

- Размеры должны примерно совпадать с полученными в [Part 12](#part-12-использование-утилиты-du).

- В отчёт вставить скрины с выводом использованных команд.

**== Решение ==**

- Установим утилиту `ncdu` командой:
    ```
    sudo apt install ncdu
    ```
- Выведем размер папки `/home`:

    ![](screens/home%20ncdu.png)

- Выведем размер папки `/var`:

    ![](screens/ncdu%20var.png)

- Выведем размер папки `/var/log`:

    ![](screens/ncdu%20var%20log.png)

- На скриншотах видно, размеры папок примерно совпадают с полученными в `части 12` [Part 12] задания.


## Part 14. Работа с системными журналами

**== Задание ==**

##### Открыть для просмотра:
##### 1. /var/log/dmesg
##### 2. /var/log/syslog
##### 3. /var/log/auth.log  

- Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему.
- Перезапустить службу SSHd.
- Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

**== Решение ==**

- `/var/log/dmesg` — драйвера устройств. Содержит сообщения, полученные от ядра. Регистрирует много сообщений еще на этапе загрузки, в них отображается информация об аппаратных устройствах, которые инициализируются в процессе загрузки. Одноименной командой можно просмотреть вывод содержимого файла. Размер журнала ограничен, когда файл достигнет своего предела, старые сообщения будут перезаписаны более новыми. Откроем для просмотра файл `/var/log/dmesg` с помощью команды:
    ```
    less /var/log/dmesg
    ```

    ![](screens/less.png)

- `/var/log/syslog` — содержит глобальный системный журнал, в котором пишутся сообщения с момента запуска системы, от ядра Linux, различных служб, обнаруженных устройствах, сетевых интерфейсов и много другого. Откроем для просмотра файл `/var/log/syslog` с помощью команды:
    ```
    less /var/log/syslog
    ```

    ![](screens/sys.png)

- `/var/log/auth.log` — информация об авторизации пользователей, включая удачные и неудачные попытки входа в систему, а также задействованные механизмы аутентификации. Откроем для просмотра файл `/var/log/auth.log` с помощью команды:
    ```
    less /var/log/auth.log
    ```

    ![](screens/14.png)

- Время последней успешной авторизации: jul 17, 20:12:50
- Имя пользователя: vm1
- Метод входа в систему: by uid = 0 (User Identifier). Суперпользователь всегда должен иметь UID, равный нулю (0).

- Перезапустим службу SSHd с помощью команды:
    ```
    sudo systemctl restart ssh
    ```
- В журнале найдем сообщение о перезапуске службы:

    ![](screens/14last.png)

## Part 15. Использование планировщика заданий **CRON**

**== Задание ==**

##### Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.
- Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
- Вывести на экран список текущих заданий для CRON.
- Вставить в отчёт скрины со строчками о выполнении и списком текущих задач.

##### Удалите все задания из планировщика заданий.
- В отчёт вставьте скрин со списком текущих заданий для CRON.

**== Решение ==**

- Запустим команду `uptime` через каждые 2 минуты. Для этого откроем планировщик заданий `CRON` в текстовом редакторе `nano` с помощью команды:
```
crontab -e
```
- Добавим строчку `*/2 * * * * uptime`

    ![](screens/cron%20tab.png)

- После чего сохраним и закроем файл.
- Найдем в системных журналах строчки о выполнении `uptime`. Для этого воспользуемся командой:
    ```
    less /var/log/syslog | grep CRON
    ```

    ![](screens/2min.png)

- Выведем на экран список текущих заданий для `CRON` с помощью команды:
    ```
    crontab -l
    ```
- Удалим все задания из планировщика заданий `CRON` с помощью команды:
    ```
    crontab -r
    ```
- Проверим список текщих задач после удаления командой `crontab -l`:

    ![](screens/r%20cron%20tab.png)